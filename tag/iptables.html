<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Chapelier Fou</title>

    <!-- Meta -->
    <meta name="description" content="Chapelier Fou &ndash; Asocial networks">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="author" content="Paul-Louis Ageneau">

    <!-- Style -->
    <link rel="stylesheet" href='https://blog.chapelierfou.org/theme/css/style.css' type="text/css">
    <link rel="stylesheet" href='https://blog.chapelierfou.org/theme/css/pygments-highlight.css' type="text/css">

    <!-- Icon -->

    <!-- Feed -->
    <link href="https://blog.chapelierfou.org/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Chapelier Fou Atom Feed">
    <link href="https://blog.chapelierfou.org/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Chapelier Fou RSS Feed">
</head>
<body id="index" class="blog">
<div id="container" class="hfeed">
    <header id="header" >
        <div id="logo">
            <h1><a href="https://blog.chapelierfou.org"><img src="https://blog.chapelierfou.org/theme/image/logo.png" alt="Chapelier Fou"></a></h1>
        </div>
        <nav id="menu" class="main-nav"><ul class="menu">
        </ul></nav>
    </header>
    <section id="wrapper" class="clearfix">
        <section id="content">
<h4 class="content-archive">Articles tagged with <span style="color:rgb(0,102,204)">iptables</span>: </h4>

<ul class="posts">
<li><article class="post hentry">
    <header>
        <h2 class="post-title" >
            <a href="https://blog.chapelierfou.org/an-ethernet-tor-box.html" rel="bookmark" title="Permalink to An Ethernet Tor box">An Ethernet Tor box</a>
        </h2>
        <div class="post-meta">
            <span class="post-date">08/09/2015</span>
            <span class="meta-prep"> | Category:</span>
            <a class="category" href="https://blog.chapelierfou.org/category/networks.html">Networks</a>
            <span class="meta-prep"> | Tags: </span>
                <a class="tag" href="https://blog.chapelierfou.org/tag/networking.html">Networking</a>,                 <a class="tag" href="https://blog.chapelierfou.org/tag/iptables.html">iptables</a>        </div>
    </header>
    <div class="summary"><p>You are without doubt already familiar with the <a class="reference external" href="https://www.torproject.org/">Tor
project</a>. The <a class="reference external" href="https://www.torproject.org/projects/torbrowser.html.en">Tor
browser</a> is
already a very handy tool to surf anonymously, but what if we had an
entire network's traffic forwarded through Tor via a special gateway?
Let's transform a tiny router in a transparent Tor proxy, a portable
Wifi access point redirecting all traffic to the Tor network!</p>
<a class="reference external image-reference" href="https://en.wikipedia.org/wiki/Tor_%28anonymity_network%29"><img alt="Tor logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Tor-logo-2011-flat.svg/640px-Tor-logo-2011-flat.svg.png" style="width: 50%;" /></a>
<p>Let's begin with a short presentation of one of my favorite hackable
network devices: the
<a class="reference external" href="http://www.tp-link.com/en/products/details/cat-4691_TL-MR3020.html">TL-MR3020</a>.</p>
<div class="figure">
<a class="reference external image-reference" href="https://blog.chapelierfou.org/images/TL-MR3020-03-e1441720743578.jpg"><img alt="TP-link TL-MR3020" src="https://blog.chapelierfou.org/images/TL-MR3020-03-e1441720743578.jpg" style="width: 50%;" /></a>
<p class="caption">The portable 3G/4G wireless N router TL-MR3020 from TP-Link</p>
</div>
<p>Despite being marketed as a <em>portable 3G/4G wireless N router</em>, it
does not possess any kind of mobile telecommunication interface.
Instead, it's a very small and cheap router featuring a 802.11n
150Mbps Wifi interface, a 100Mbps ethernet port, and a USB port. It is
powered over a mini-B USB port and it has an extremely low power
consumption with an average current draw around 120mA at 5V, <em>i.e.</em>
600mW. Its hardware is pretty limited: an Atheros AR9331 SoC with a
400MHz MIPS processor, 32MB of RAM, and 4MB of flash memory.</p>
<p>The preliminary step for our Tor box is to <a class="reference external" href="http://wiki.openwrt.org/toh/tp-link/tl-mr3020">install …</a></p></div>
    <div class="readmore"><a href="https://blog.chapelierfou.org/an-ethernet-tor-box.html">Read more...</a></div>
    <hr>
</article></li>
<li><article class="post hentry">
    <header>
        <h2 class="post-title" >
            <a href="https://blog.chapelierfou.org/a-smart-vpn-gateway.html" rel="bookmark" title="Permalink to A smart VPN gateway">A smart VPN gateway</a>
        </h2>
        <div class="post-meta">
            <span class="post-date">29/06/2015</span>
            <span class="meta-prep"> | Category:</span>
            <a class="category" href="https://blog.chapelierfou.org/category/networks.html">Networks</a>
            <span class="meta-prep"> | Tags: </span>
                <a class="tag" href="https://blog.chapelierfou.org/tag/networking.html">Networking</a>,                 <a class="tag" href="https://blog.chapelierfou.org/tag/vpn.html">VPN</a>,                 <a class="tag" href="https://blog.chapelierfou.org/tag/iptables.html">iptables</a>        </div>
    </header>
    <div class="summary"><p>My network setup at home is surprisingly pretty common: a DSL modem
(VDSL2 actually) followed by a router featuring an ethernet switch and
an 802.11n Wifi access point, configured as a NAT gateway.</p>
<div class="figure">
<img alt="My home network setup before modifications" src="https://blog.chapelierfou.org/images/mynetwork_before.png" style="width: 453px;" />
<p class="caption">My home network setup before modifications</p>
</div>
<p>Let's imagine I'm in a country that doesn't care about the right to
private life of its citizens and performs automated mass surveillance,
on the pretext of fighting against terrorism or copyright infringement.
A gloomy perspective for sure, but let's keep that as our work
hypothesis, <a class="reference external" href="https://www.theverge.com/2015/7/24/9030851/france-surveillance-law-charlie-hebdo-constitutional-court">for what the future holds in store</a>.</p>
<p>Of course, I could just set up on every computer a VPN whose gateway
happens to be in a foreign and more respectful country. However,
multiple VPNs on multiple computers are a highly impractical setup for
various reasons:</p>
<ul class="simple">
<li>VPN configuration has to be done multiple times, and I'm allergic to
repetitive tasks</li>
<li>The maximum number of concurrent connections is restricted by VPN
service providers</li>
<li>Access to resources on a local network at the same time is a hassle
and need specific configuration, like DNS settings</li>
</ul>
<p>So, why not install the VPN once and for all in a …</p></div>
    <div class="readmore"><a href="https://blog.chapelierfou.org/a-smart-vpn-gateway.html">Read more...</a></div>
    <hr>
</article></li>
</ul>
        </section>
        <section id="widgets">
            <section id="widget-category" class="widget-wrapper">
                <div class="widget-title">
                    Categories
                </div>
                <ul>
                        <li><a href="https://blog.chapelierfou.org/category/hardware.html" >Hardware </a></li>
                        <li><a href="https://blog.chapelierfou.org/category/networks.html" >Networks </a></li>
                        <li><a href="https://blog.chapelierfou.org/category/robotics.html" >Robotics </a></li>
                </ul>
            </section>

            <section id="widget-tags" class="widget-wrapper">
                <div class="widget-title">
                    Tags
                </div>
                <div>
                <ul>
                       <li><a href="https://blog.chapelierfou.org/tag/raspberry-pi.html">Raspberry Pi</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/furby.html">Furby</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/vintage.html">Vintage</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/arduino.html">Arduino</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/3d-printing.html">3D Printing</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/minitel.html">Minitel</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/networking.html">Networking</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/webrtc.html">WebRTC</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/video.html">Video</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/music.html">Music</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/iptables.html">iptables</a></li>
                       <li><a href="https://blog.chapelierfou.org/tag/vpn.html">VPN</a></li>
                </ul>
                </div>
            </section>
            <section id="widget-feeds" class="widget-wrapper">
                <div class="widget-title">
                    Feeds
                </div>
                <ul>
                        <li><a href="https://blog.chapelierfou.org/feeds/atom.xml">Atom</a></li>
                        <li><a href="https://blog.chapelierfou.org/feeds/rss.xml">RSS</a></li>
                </ul>
            </section>
            <section id="widget-links" class="widget-wrapper">
                <div class="widget-title">
                    Links
                </div>
                <ul>
                        <li><a href="https://ageneau.org/paul-louis/">Personal page</a></li>
                        <li><a href="https://github.com/paullouisageneau/">GitHub page</a></li>
                        <li><a href="https://twitter.com/plajno">Twitter @plajno</a></li>
                        <li><a href="http://nc233.com/">NC233</a></li>
                </ul>
            </section>
            <div class="sponsor">
                <iframe src="https://github.com/sponsors/paullouisageneau/button" title="Sponsor paullouisageneau" height="35" width="116" style="border: 0;"></iframe>
                <div class="liberapay"><a href="https://liberapay.com/paullouisageneau/donate"><img alt="Donate using Liberapay" src="https://liberapay.com/assets/widgets/donate.svg"></a></div>
                <div class="ko-fi"><a href='https://ko-fi.com/A0A8CIDHU' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://cdn.ko-fi.com/cdn/kofi3.png?v=3' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a></div>
            </div>
            <div class="copyright" >
                <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license">
                    <img src="https://blog.chapelierfou.org/theme/image/by-nc-sa.png" alt="License CC BY-NC-SA 3.0">
                </a>
            </div>
        </section>
    </section>
    <footer id="footer" class="clearfix"><section class="footer-wrapper">
        <div class="powered">
            Powered by <a href="https://getpelican.com/">Pelican</a>
        </div>
    </section></footer>
</div>
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["setCookieDomain", "*.chapelierfou.org"]);
  _paq.push(["setDomains", ["*.chapelierfou.org"]]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//ageneau.org/pw/";
    _paq.push(['setTrackerUrl', u+'pw.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'pw.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//ageneau.org/pw/pw.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->
</body>
</html>